(function(c,a,u,t,g,i,E){"use strict";function p(e){if(e&&e.__esModule)return e;var o=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var f=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(o,n,f.get?f:{enumerable:!0,get:function(){return e[n]}})}}),o.default=e,Object.freeze(o)}var r=p(g);const l=i.findByDisplayName("SwitchItem"),y=i.findByDisplayName("Slider"),b=i.findByProps("title","titleDefault","dividerDefault"),_=i.findByProps("marginTop8","marginCenterHorz","marginLarge");function A(){return E.useNest(t.persist),r.createElement("div",null,r.createElement("div",{className:_.marginBottom8},r.createElement("label",{className:b.title},"Volume"),r.createElement(y,{initialValue:(t.persist.ghost.volume||.5)*100,minValue:0,maxValue:100,onValueChange:e=>t.persist.store.volume=e/100})),r.createElement(l,{value:t.persist.ghost.allowReactions||!1,hideBorder:!0,onChange:e=>t.persist.store.allowReactions=typeof e=="object"?e.target.checked:e},"Play on reactions"),r.createElement(l,{value:t.persist.ghost.husk||!1,hideBorder:!0,onChange:e=>t.persist.store.husk=typeof e=="object"?e.target.checked:e},"Play for Aliucord husk"))}const S="https://raw.githubusercontent.com/Metastruct/garrysmod-chatsounds/master/sound/chatsounds/autoadd/memes/overused%20thud.ogg",s={node:new Audio(S)};function d(){if(s.node.paused&&!s.locked)s.locked=!0,s.node.currentTime=0,s.node.volume=t.persist.ghost.volume||.5,s.node.play().then(()=>{s.locked=!1});else{let e=s.node.cloneNode();e.currentTime=0,e.volume=t.persist.ghost.volume||.5,e.play(),e.addEventListener("ended",()=>{e.src="",e=null},{once:!0})}}function m(e){if(e.message.content&&e.channelId===u.getChannelId()&&!e.message.state&&e.sendMessageOptions===void 0){let o=(e.message.content.match(/ðŸ—¿/g)||[]).length;if(o+=(e.message.content.match(/<a?:.*?moy?ai.*?:.+?>/gi)||[]).length,t.persist.ghost.husk&&(o+=(e.message.content.match(/<a?:.*?husk.*?:.+?>/gi)||[]).length),o>0)for(let n=0;n<o;n++)setTimeout(d,n*350)}}function h(e){t.persist.ghost.allowReactions&&e.channelId===u.getChannelId()&&(e.emoji.name==="\u{1F5FF}"||e.emoji.name.match(/.*?moy?ai.*?/)||t.persist.ghost.husk&&e.emoji.name.match(/.*?husk.*?/))&&!e.optimistic&&d()}function C(){a.FluxDispatcher.subscribe("MESSAGE_CREATE",m),a.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",h)}function j(){a.FluxDispatcher.unsubscribe("MESSAGE_CREATE",m),a.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",h)}return c.onLoad=C,c.onUnload=j,c.settings=A,Object.defineProperty(c,"__esModule",{value:!0}),c})({},cumcord.modules.common,cumcord.modules.common.channels,cumcord.pluginData,cumcord.modules.common.React,cumcord.modules.webpack,cumcord.utils);
