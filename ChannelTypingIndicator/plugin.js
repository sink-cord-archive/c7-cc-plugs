(function(u,h,d,m,T,i){"use strict";function I(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var r=I(h);const b=d.findByProps("typing","ellipsis"),y=d.findByProps("AnimatedDots","default").default,_=d.findByDisplayName("ChannelItem",!1),s={},l=new Set;function c(e){e.type=="TYPING_START"?(s[e.channelId]||(s[e.channelId]=new Set),s[e.channelId].add(e.userId)):s[e.channelId]&&s[e.channelId].delete(e.message?e.message.author.id:e.userId);for(const{update:n,channelId:t}of l)t==e.channelId&&n()}function g({channel:e,muted:n}){const[t,a]=r.useState(!!s[e.id]?.size);return r.useEffect(()=>{function f(){a(s[e.id]?.size)}const p={update:f,channelId:e.id};return l.add(p),f(),()=>{l.delete(p)}},[e.id]),!t||n?null:r.createElement("div",{style:{marginLeft:"6px",paddingBottom:"3px"}},r.createElement(y,{className:b.ellipsis,dotRadius:3.5,themed:!0}))}let o;function E(){i.FluxDispatcher.subscribe("TYPING_START",c),i.FluxDispatcher.subscribe("TYPING_STOP",c),i.FluxDispatcher.subscribe("MESSAGE_CREATE",c),o=T.after("default",_,function([e],n){const t=m.findInReactTree(n,a=>a?.className?.startsWith("children-"));t&&t.children.push(r.createElement(g,{channel:e.channel,muted:e.muted}))})}function S(){i.FluxDispatcher.unsubscribe("TYPING_START",c),i.FluxDispatcher.unsubscribe("TYPING_STOP",c),i.FluxDispatcher.unsubscribe("MESSAGE_CREATE",c),o()}return u.onLoad=E,u.onUnload=S,Object.defineProperty(u,"__esModule",{value:!0}),u})({},cumcord.modules.common.React,cumcord.modules.webpack,cumcord.utils,cumcord.patcher,cumcord.modules.common);
