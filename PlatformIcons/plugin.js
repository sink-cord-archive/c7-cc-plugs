(function(p,h,r,m,P,d){"use strict";function S(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(o){if(o!=="default"){var t=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,t.get?t:{enumerable:!0,get:function(){return e[o]}})}}),n.default=e,Object.freeze(n)}var i=S(h);const _=r.findByProps("useStateFromStores"),u=r.findByProps("UserSettingsSections"),{humanizeStatus:T}=r.findByProps("humanizeStatus"),D=r.findByDisplayName("Tooltip"),y=r.findByProps("getAllApplicationActivities"),E=r.findByDisplayName("Monitor"),I=r.findByDisplayName("MobileDevice"),g=r.findByDisplayName("Globe"),A=r.findByDisplayName("PlatformXbox"),N={desktop:E,mobile:I,web:g,embedded:A},B={online:u.Colors.STATUS_GREEN_600,idle:u.Colors.STATUS_YELLOW_500,dnd:u.Colors.STATUS_RED_500};function f({user:e}){const n=_.useStateFromStores([y],()=>y.getState()?.clientStatuses?.[e.id]||{},[e]),o=[];for(const t of Object.keys(n)){const s=n[t];o.push(i.createElement(D,{text:`${T(s,!1)} on ${t.charAt(0).toUppercase()}${t.slice(1)}`},l=>i.createElement(N[t],Object.assign({},l,{color:B[s],width:16,height:16,style:{margin:"1px"}}))))}return!e.bot&&i.createElement("div",{className:"platform-icons-wrapper",style:{marginLeft:"4px"}},o)}const O=r.findByProps("AVATAR_DECORATION_PADDING"),U=r.findByDispNameDeep("PrivateChannel");r.findByDisplayName("AvatarWithText",!1);const v=r.findByProps("UserPopoutInfo");r.findByProps("getDMUserIds"),r.findByProps("getUser","getCurrentUser");const a=[];function C(){const e=d.after("type",O.default,(n,o)=>{e();const t=o.type;a.push(d.after("renderDecorators",t.prototype,(s,l)=>{const{props:c}=l._owner.stateNode;l.props.children.splice(0,0,i.createElement(f,{user:c.user}))}))});a.push(e),a.push(d.after("render",U.prototype,function(n,o){const t=this.props;t.channel?.type===1&&(!t.user||(typeof o.props?.children!="function"?P.warn("|| PlatformIcons || unexpected dmlist props type; PLEASE REPORT THIS TO SINK",o.props,o.props?.children):a.push(d.after("children",o.props,(s,l)=>{const c=m.findInReactTree(l,R=>R?.decorators!==void 0);!c||(Array.isArray(c.decorators)||(c.decorators=[c.decorators]),c.decorators.push(i.createElement(f,{user:t.user})))}))))})),a.push(d.after("UserPopoutInfo",v,(n,o)=>{const t=m.findInReactTree(o,s=>s.className&&s.className.startsWith("headerText-"));if(t){const s=t.children[1];t.children[1]=i.createElement("div",{style:{display:"flex",flexDirection:"row"}},s,i.createElement(f,{user:s.props.user}))}}))}const M=()=>a.forEach(e=>e());return p.onLoad=C,p.onUnload=M,Object.defineProperty(p,"__esModule",{value:!0}),p})({},cumcord.modules.common.React,cumcord.modules.webpack,cumcord.utils,cumcord.utils.logger,cumcord.patcher);
