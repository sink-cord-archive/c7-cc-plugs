(function(p,h,s,y,T,d){"use strict";function _(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var i=_(h);const P=s.findByProps("useStateFromStores"),u=s.findByProps("UserSettingsSections"),f=s.findByPropsAll("Messages")[1].Messages,g=s.findByDisplayName("Tooltip"),S=s.findByProps("getAllApplicationActivities"),D=s.findByDisplayName("Monitor"),A=s.findByDisplayName("MobileDevice"),E=s.findByDisplayName("Globe"),I={desktop:D,mobile:A,web:E},N={online:u.Colors.STATUS_GREEN_600,idle:u.Colors.STATUS_YELLOW_500,dnd:u.Colors.STATUS_RED_500},U={online:f.STATUS_ONLINE,idle:f.STATUS_IDLE,dnd:f.STATUS_DND};function m({user:e}){const n=P.useStateFromStores([S],()=>S.getState()?.clientStatuses?.[e.id]||{},[e]),t=[];for(const o of Object.keys(n)){const r=n[o];t.push(i.createElement(g,{text:`${U[r]} on ${o}`},l=>i.createElement(I[o],Object.assign({},l,{color:N[r],width:16,height:16,style:{margin:"1px"}}))))}return!e.bot&&i.createElement("div",{className:"platform-icons-wrapper",style:{marginLeft:"4px"}},t)}const O=s.findByProps("AVATAR_DECORATION_PADDING"),B=s.findByDispNameDeep("PrivateChannel");s.findByDisplayName("AvatarWithText",!1);const M=s.findByProps("UserPopoutInfo");s.findByProps("getDMUserIds"),s.findByProps("getUser","getCurrentUser");const a=[];function v(){const e=d.after("type",O.default,(n,t)=>{e();const o=t.type;a.push(d.after("renderDecorators",o.prototype,(r,l)=>{const{props:c}=l._owner.stateNode;l.props.children.splice(0,0,i.createElement(m,{user:c.user}))}))});a.push(e),a.push(d.after("render",B.prototype,function(n,t){const o=this.props;o.channel?.type===1&&(!o.user||(typeof t.props?.children!="function"?T.warn("|| PlatformIcons || unexpected dmlist props type; PLEASE REPORT THIS TO SINK",t.props,t.props?.children):a.push(d.after("children",t.props,(r,l)=>{const c=y.findInReactTree(l,L=>L?.decorators!==void 0);!c||(Array.isArray(c.decorators)||(c.decorators=[c.decorators]),c.decorators.push(i.createElement(m,{user:o.user})))}))))})),a.push(d.after("UserPopoutInfo",M,(n,t)=>{const o=y.findInReactTree(t,r=>r.className&&r.className.startsWith("headerText-"));if(o){const r=o.children[1];o.children[1]=i.createElement("div",{style:{display:"flex",flexDirection:"row"}},r,i.createElement(m,{user:r.props.user}))}}))}const C=()=>a.forEach(e=>e());return p.onLoad=v,p.onUnload=C,Object.defineProperty(p,"__esModule",{value:!0}),p})({},cumcord.modules.common.React,cumcord.modules.webpack,cumcord.utils,cumcord.utils.logger,cumcord.patcher);
